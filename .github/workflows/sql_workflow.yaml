name: Snowflake SQL Scripts

on:
  push:
    branches:
      - main  # You can change this to the branch you want to trigger the workflow on

jobs:
  snowflake_sql_scripts:
    name: Run Snowflake SQL Scripts
    runs-on: ubuntu-latest

    steps:
      - name: Checkout code
        uses: actions/checkout@v2

      - name: Set up SnowSQL
        run: |
          curl -O https://sfc-repo.snowflakecomputing.com/snowsql/bootstrap/1.2/linux_x86_64/snowsql-1.2.9-linux_x86_64.bash
          chmod +x snowsql-1.2.9-linux_x86_64.bash
          SNOWSQL_DEST=~/snowflake SNOWSQL_LOGIN_SHELL=~/.profile bash snowsql-1.2.9-linux_x86_64.bash

      - name: Set up SnowSQL Config
        run: |
          echo "[connections]" >> $HOME/.snowsql/config
          echo "accountname = HYUGZMI-NFB65118" >> $HOME/.snowsql/config
          echo "username = SANJU1209" >> $HOME/.snowsql/config
          echo "password = ${{ secrets.SNOWFLAKE_PASSWORD }}" >> $HOME/.snowsql/config
          # You can also add other configuration options if needed

      - name: List SQL scripts
        run: cd steps  # Adjust the path to your SQL script folder

      - name: Run SQL scripts
        run: |
          
          ~/snowflake/snowsql -f 1.database.sql
          ~/snowflake/snowsql -f 2.importing_data.sql
          ~/snowflake/snowsql -f 3.User_Defined_Functions.sql
          ~/snowflake/snowsql -f 4.USE_CASE_01/4.USE_CASE_01.sql
          ~/snowflake/snowsql -f 5.USE_CASE_02/5.USE_CASE_02.sql
          ~/snowflake/snowsql -f 6.USE_CASE_03/6.USE_CASE_03.sql
          ~/snowflake/snowsql -f 7.USE_CASE_04/7.USE_CASE_04.sql

    